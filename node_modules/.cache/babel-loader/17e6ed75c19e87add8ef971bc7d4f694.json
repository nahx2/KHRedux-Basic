{"ast":null,"code":"var _jsxFileName = \"C:\\\\git_java20220415\\\\Redux-Basic\\\\src\\\\talk\\\\TomatoTalk.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, onValue, set } from \"firebase/database\";\nimport { Button, Form, InputGroup } from \"react-bootstrap\";\nimport { MessageLi } from \"../style/TalkStyle\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCIS_v1-BdrTwGF2BQrGgPoiDd2u1A6XZw\",\n  authDomain: \"virtual-primer-354906.firebaseapp.com\",\n  databaseURL: \"https://virtual-primer-354906-default-rtdb.asia-southeast1.firebasedatabase.app\",\n  projectId: \"virtual-primer-354906\",\n  storageBucket: \"virtual-primer-354906.appspot.com\",\n  messagingSenderId: \"442922054622\",\n  appId: \"1:442922054622:web:aaa9cf4f99a2a45ef8a34f\",\n  measurementId: \"G-DM03L94YWH\"\n};\nconst firebaseapp = initializeApp(firebaseConfig);\nconst database = getDatabase();\n\nconst TomatoTalk = props => {\n  _s();\n\n  const formRef = useRef();\n  const msgRef = useRef();\n  const userIdRef = useRef(); // 클라우드 리얼데이터베이스 서버 정보 동기화 처리\n  // 메시지 전송시 객체로 넘겼으므로 초기화도 []이 아니라 {}로 해야함 - 주의\n\n  const [messages, setMessages] = useState({}); // 사용자가 입력한 메세지 담기\n\n  const [message, setMessage] = useState({\n    m_no: 0,\n    userId: \"\",\n    msg: \"\",\n    curtime: \"\"\n  });\n\n  const setClock = () => {\n    const dateInfo = new Date();\n    const hour = modifyNumber(dateInfo.getHours());\n    const min = modifyNumber(dateInfo.getMinutes());\n    const sec = modifyNumber(dateInfo.getSeconds());\n    const curtime = hour + \":\" + min + \":\" + sec;\n    return curtime;\n  };\n\n  const modifyNumber = time => {\n    if (parseInt(time) < 10) return \"0\" + time;else return time;\n  };\n\n  useEffect(() => {\n    console.log(database);\n    setMessage({ ...message,\n      curtime: setClock()\n    });\n    const starCountRef = ref(database, \"talk\");\n    onValue(starCountRef, snapshot => {\n      const data = snapshot.val();\n      console.log(data);\n    });\n  }, []);\n\n  const send = event => {\n    if (event.key === \"Enter\") {\n      //submit속성 사용 시 반드시 아래코드 추가할 것, 버블링 방지! 주의할 것!\n      event.preventDefault(); //사용자가 입력해서 제출하고 나면 폼 리셋되도록 해줌\n\n      formRef.current.reset();\n      set(ref(database, \"talk/\" + message.m_no), message);\n    }\n  };\n\n  const handleChangeForm = event => {\n    if (event.currentTarget == null) return;\n    console.log(\"폼 내용 변경 발생 name :\" + event.target.name);\n    console.log(\"폼 내용 변경 발생 value :\" + event.target.value);\n    setMessage({ ...message,\n      userId: \"토마토\",\n      m_no: Date.now(),\n      [event.target.name]: event.target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"TomatoTalk\", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa-solid fa-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: \"\\uD1A0\\uB9C8\\uD1A0\\uB2D8 \\uC608\\uC57D\\uC0C1\\uB2F4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: messages && Object.keys(messages).map(key => /*#__PURE__*/_jsxDEV(MessageLi, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            className: \"btn btn-primary\",\n            children: messages[key].msg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this), \"\\xA0(\", messages[key].curtime, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      ref: formRef,\n      children: /*#__PURE__*/_jsxDEV(InputGroup, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"hidden\",\n          ref: userIdRef,\n          name: \"userId\",\n          onChange: handleChangeForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          ref: msgRef,\n          name: \"msg\",\n          placeholder: \"\\uC5EC\\uAE30\\uC5D0 \\uB9D0\\uC500\\uD558\\uC138\\uC6A9\",\n          \"aria-label\": \"Username\",\n          \"aria-describedby\": \"basic-addon1\",\n          onKeyDown: send,\n          onChange: handleChangeForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: send,\n          onKeyDown: send,\n          children: \"send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TomatoTalk, \"c3V1FuNzHcvxz+6BCLa1UjkS7Dw=\");\n\n_c = TomatoTalk;\nexport default TomatoTalk;\n\nvar _c;\n\n$RefreshReg$(_c, \"TomatoTalk\");","map":{"version":3,"names":["React","useEffect","useRef","useState","initializeApp","getDatabase","ref","onValue","set","Button","Form","InputGroup","MessageLi","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseapp","database","TomatoTalk","props","formRef","msgRef","userIdRef","messages","setMessages","message","setMessage","m_no","userId","msg","curtime","setClock","dateInfo","Date","hour","modifyNumber","getHours","min","getMinutes","sec","getSeconds","time","parseInt","console","log","starCountRef","snapshot","data","val","send","event","key","preventDefault","current","reset","handleChangeForm","currentTarget","target","name","value","now","Object","keys","map"],"sources":["C:/git_java20220415/Redux-Basic/src/talk/TomatoTalk.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getDatabase, ref, onValue, set } from \"firebase/database\";\r\nimport { Button, Form, InputGroup } from \"react-bootstrap\";\r\nimport { MessageLi } from \"../style/TalkStyle\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCIS_v1-BdrTwGF2BQrGgPoiDd2u1A6XZw\",\r\n  authDomain: \"virtual-primer-354906.firebaseapp.com\",\r\n  databaseURL:\r\n    \"https://virtual-primer-354906-default-rtdb.asia-southeast1.firebasedatabase.app\",\r\n  projectId: \"virtual-primer-354906\",\r\n  storageBucket: \"virtual-primer-354906.appspot.com\",\r\n  messagingSenderId: \"442922054622\",\r\n  appId: \"1:442922054622:web:aaa9cf4f99a2a45ef8a34f\",\r\n  measurementId: \"G-DM03L94YWH\",\r\n};\r\n\r\nconst firebaseapp = initializeApp(firebaseConfig);\r\nconst database = getDatabase();\r\n\r\nconst TomatoTalk = (props) => {\r\n  const formRef = useRef();\r\n  const msgRef = useRef();\r\n  const userIdRef = useRef();\r\n  // 클라우드 리얼데이터베이스 서버 정보 동기화 처리\r\n  // 메시지 전송시 객체로 넘겼으므로 초기화도 []이 아니라 {}로 해야함 - 주의\r\n  const [messages, setMessages] = useState({});\r\n  // 사용자가 입력한 메세지 담기\r\n  const [message, setMessage] = useState({\r\n    m_no: 0,\r\n    userId: \"\",\r\n    msg: \"\",\r\n    curtime: \"\",\r\n  });\r\n  const setClock = () => {\r\n    const dateInfo = new Date();\r\n    const hour = modifyNumber(dateInfo.getHours());\r\n    const min = modifyNumber(dateInfo.getMinutes());\r\n    const sec = modifyNumber(dateInfo.getSeconds());\r\n    const curtime = hour + \":\" + min + \":\" + sec;\r\n    return curtime;\r\n  };\r\n  const modifyNumber = (time) => {\r\n    if (parseInt(time) < 10) return \"0\" + time;\r\n    else return time;\r\n  };\r\n  useEffect(() => {\r\n    console.log(database);\r\n    setMessage({ ...message, curtime: setClock() });\r\n    const starCountRef = ref(database, \"talk\");\r\n    onValue(starCountRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      console.log(data);\r\n    });\r\n  }, []);\r\n  const send = (event) => {\r\n    if (event.key === \"Enter\") {\r\n      //submit속성 사용 시 반드시 아래코드 추가할 것, 버블링 방지! 주의할 것!\r\n      event.preventDefault();\r\n      //사용자가 입력해서 제출하고 나면 폼 리셋되도록 해줌\r\n      formRef.current.reset();\r\n      set(ref(database, \"talk/\" + message.m_no), message);\r\n    }\r\n  };\r\n  const handleChangeForm = (event) => {\r\n    if (event.currentTarget == null) return;\r\n    console.log(\"폼 내용 변경 발생 name :\" + event.target.name);\r\n    console.log(\"폼 내용 변경 발생 value :\" + event.target.value);\r\n    setMessage({\r\n      ...message,\r\n      userId: \"토마토\",\r\n      m_no: Date.now(),\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"page-header\">\r\n        <h2>\r\n          TomatoTalk\r\n          <i className=\"fa-solid fa-\"></i>\r\n          <small>토마토님 예약상담</small>\r\n        </h2>\r\n      </div>\r\n      <div>\r\n        <ul>\r\n          {messages &&\r\n            Object.keys(messages).map((key) => (\r\n              <MessageLi>\r\n                <Button className=\"btn btn-primary\">{messages[key].msg}</Button>\r\n                &nbsp;({messages[key].curtime})\r\n              </MessageLi>\r\n            ))}\r\n        </ul>\r\n      </div>\r\n      <Form ref={formRef}>\r\n        <InputGroup className=\"mb-3\">\r\n          <input\r\n            type=\"hidden\"\r\n            ref={userIdRef}\r\n            name=\"userId\"\r\n            onChange={handleChangeForm}\r\n          />\r\n          <Form.Control\r\n            ref={msgRef}\r\n            name=\"msg\"\r\n            placeholder=\"여기에 말씀하세용\"\r\n            aria-label=\"Username\"\r\n            aria-describedby=\"basic-addon1\"\r\n            onKeyDown={send}\r\n            onChange={handleChangeForm}\r\n          />\r\n          <Button onClick={send} onKeyDown={send}>\r\n            send\r\n          </Button>\r\n        </InputGroup>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TomatoTalk;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}